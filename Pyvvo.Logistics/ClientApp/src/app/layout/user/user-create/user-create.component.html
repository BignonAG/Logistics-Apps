<nb-card [nbSpinner]="cardLoading"
         nbSpinnerStatus="danger"
         nbSpinnerSize="large"
         nbSpinnerMessage="">
  <nb-card-header>
    {{formTitle}}
  </nb-card-header>

  <nb-card-body>
    <form [formGroup]="userForm" (ngSubmit)="upsertUser(userForm.value)" #formDir="ngForm" novalidate style="padding:20px;">

      <!--------------------------- Contact fields ------------------>
      <ng-container formGroupName="contact">

        <h6>User contact informations</h6>

        <!-- Firstname -->
        <div class="mg-top form-group row">
          <label for="firstname" class="col-3 col-sm-3 col-form-label">Firstname</label>
          <div class="col-9 col-sm-9">
            <input type="text" nbInput fullWidth id="firstname" placeholder="Firstname" formControlName="firstName">
            <span class="text-danger" *ngIf="userForm.hasError('required', ['firstName']) && formDir.submitted">
              Please enter a firstname.
            </span>
          </div>
        </div>

        <!-- Lastname -->
        <div class="mg-top form-group row">
          <label for="lastName" class="col-3 col-sm-3 col-form-label">Lastname</label>
          <div class="col-9 col-sm-9">
            <input type="text" nbInput fullWidth id="lastName" placeholder="LastName" formControlName="lastName">
            <span class="text-danger" *ngIf="userForm.hasError('required', ['lastName']) && formDir.submitted">
              Please enter a lastName.
            </span>
          </div>
        </div>

        <!-- Email -->
        <div class="mg-top form-group row">
          <label for="email" class="col-3 col-sm-3 col-form-label">Email</label>
          <div class="col-9 col-sm-9">
            <input type="email" nbInput fullWidth id="email" placeholder="email" formControlName="email">
            <span class="text-danger" *ngIf="userForm.hasError('required', ['email']) && formDir.submitted">
              Please enter a valid email.
            </span>
          </div>
        </div>


        <!-- Phone -->
        <div class="mg-top form-group row">
          <label for="phone" class="col-3 col-sm-3 col-form-label">Phone</label>
          <div class="col-9 col-sm-9">
            <input type="text" nbInput fullWidth id="phone" placeholder="Phone" formControlName="phone">
          </div>
        </div>

        <div class="mg-top form-group row">
          <label for="website" class="col-3 col-sm-3 col-form-label">Website</label>
          <div class="col-9 col-sm-9">
            <input type="text" nbInput fullWidth id="website" placeholder="Website url" formControlName="website">
            <!--<span class="text-danger" *ngIf="userForm.hasError('required', ['lastName']) && formDir.submitted">
          Please enter a lastName.
        </span>-->
          </div>
        </div>

        <div class="mg-top form-group row">
          <label for="facebook" class="col-3 col-sm-3 col-form-label">Facebook</label>
          <div class="col-9 col-sm-9">
            <input type="text" nbInput fullWidth id="facebook" placeholder="Facebook url" formControlName="facebook">
            <!--<span class="text-danger" *ngIf="userForm.hasError('required', ['lastName']) && formDir.submitted">
          Please enter a lastName.
        </span>-->
          </div>
        </div>

        <div class="mg-top form-group row">
          <label for="linkedin" class="col-3 col-sm-3 col-form-label">Linkedin</label>
          <div class="col-9 col-sm-9">
            <input type="text" nbInput fullWidth id="linkedin" placeholder="Linkedin url" formControlName="linkedin">
          </div>
        </div>

        <div class="mg-top form-group row">
          <label for="viadeo" class="col-3 col-sm-3 col-form-label">Viadeo</label>
          <div class="col-9 col-sm-9">
            <input type="text" nbInput fullWidth id="viadeo" placeholder="Viadeo url" formControlName="viadeo">
          </div>
        </div>

      </ng-container>

      <ng-container formGroupName="status">
        <div class="mg-top form-group row">
          <label for="status" class="col-3 col-sm-3 col-form-label">Status</label>
          <div class="col-9 col-sm-9">
            <nb-select id="status" placeholder="Status" formControlName="id" style="width:100%" aria-describedby="newStatus" selected ="{{selectedStatusId}}">
              <nb-option *ngFor="let statusOption of status" value="{{statusOption.id}}">
                {{statusOption.name}}
              </nb-option>
            </nb-select>
            <span class="text-danger" *ngIf="userForm.hasError('required', ['id']) && formDir.submitted">
              Please enter a valid status.
            </span>
          </div>
        </div>
      </ng-container>
      <!------------------------------Address fields------------------------------->

      <p class="text-danger" *ngIf="errorMessage">{{errorMessage}}</p>

      <div class="mg-top form-group row">
        <div class="offset-sm-3 col-sm-9">
          <button type="submit" nbButton status="primary" [nbSpinner]="loading" nbSpinnerStatus="control">{{txtBtnSubmit}}</button>
        </div>
      </div>

    </form>

  </nb-card-body>
</nb-card>
